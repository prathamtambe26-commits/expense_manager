
<!DOCTYPE html>
<html>
<head>
    <title>eXpense</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <h1>eXpense</h1>

    <div class="summary">
        <div>
            <h2>Current Balance</h2>
            <p>₹{{ "%.2f"|format(current_balance) }}</p>
        </div>
        <div>
            <h2>Monthly Spending</h2>
            <p>₹{{ "%.2f"|format(monthly_spending) }}</p>
        </div>
        <div>
            <h2>Monthly Earnings</h2>
            <p>₹{{ "%.2f"|format(monthly_earnings) }}</p>
        </div>
    </div>

    <h2>Add Transaction</h2>
    <form action="/add" method="post">
        <label for="date">Date:</label>
        <input type="date" id="date" name="date" required>

        <label for="transaction_type">Transaction Type:</label>
        <select id="transaction_type" name="transaction_type" required>
            <option value="Expenditure">Expenditure</option>
            <option value="Income">Income</option>
        </select>

        <label for="category">Category:</label>
        <select id="category" name="category" onchange="checkOther(this.value)">
            <option value="Food">Food</option>
            <option value="Transportation">Transportation</option>
            <option value="Housing">Housing</option>
            <option value="Entertainment">Entertainment</option>
            <option value="Other">Other</option>
        </select>

        <input type="text" id="other_category_input" name="other_category" style="display:none;" placeholder="Enter other category">

        <label for="amount">Amount:</label>
        <input type="number" id="amount" name="amount" step="0.01" required>
        <button type="submit">Add</button>
    </form>

    <h2>Transactions</h2>
    <table border="2">
        <tr>
            <th>Date</th>
            <th>Category</th>
            <th>Amount</th>
            <th>Type</th>
        </tr>
        {% for transaction in transactions %}
        <tr>
            <td>{{ transaction.Date.strftime('%Y-%m-%d') }}</td>
            <td>{{ transaction.Category }}</td>
            <td>₹{{ "%.2f"|format(transaction.Amount) }}</td>
            <td>{{ transaction.Type }}</td>
        </tr>
        {% endfor %}
    </table>

    <br>
    <a href="/plot">View Spending Chart</a>
    <br>
    <a href="/download">Download Transactions as CSV</a>

    <script>
    function checkOther(val){
     var element=document.getElementById('other_category_input');
     if(val=='Other')
       element.style.display='block';
     else  
       element.style.display='none';
    }
    </script>
</body>
</html>
